"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[854],{8663:(H,h,a)=>{a.r(h),a.d(h,{SubscriptionsModule:()=>Q});var p=a(6895),g=a(9455),Z=a(5226),_=a.n(Z),t=a(4650),T=a(7241),C=a(5830),u=a(4006),m=a(8423),d=a(4333),f=a(502),b=a(388),v=a(6442);const x=["myModal2"];function A(n,r){if(1&n&&(t.TgZ(0,"div",42)(1,"label"),t._uU(2),t.qZA()()),2&n){const i=t.oxw();t.xp6(2),t.Oqu(i.util.translate("No Data Found.."))}}function S(n,r){1&n&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",43),t.qZA())}const M=function(){return[1,2,3,4,5]};function y(n,r){1&n&&(t.TgZ(0,"tr"),t.YNc(1,S,2,0,"td",13),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,M)))}function U(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const i=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.AsE("",e.util.currecny," ",i.price," ")}}function J(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const i=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.AsE("",i.price," ",e.util.currecny,"")}}function q(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"tr")(1,"th",44),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,U,2,2,"span",14),t.YNc(7,J,2,2,"span",14),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"div",45)(12,"c-badge",46),t.NdJ("click",function(){const s=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.statusUpdate(s))}),t._uU(13),t.qZA(),t.TgZ(14,"c-badge",47),t.NdJ("click",function(){const s=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.updateInfo(s))}),t._uU(15),t.qZA(),t.TgZ(16,"c-badge",48),t.NdJ("click",function(){const s=t.CHM(i).$implicit,o=t.oxw();return t.KtG(o.deleteItem(s))}),t._uU(17),t.qZA()()()()}if(2&n){const i=r.$implicit,e=t.oxw();t.xp6(2),t.hij(" ",i.id," "),t.xp6(2),t.hij(" ",i.name," "),t.xp6(2),t.Q6J("ngIf","left"==e.util.cside),t.xp6(1),t.Q6J("ngIf","right"==e.util.cside),t.xp6(2),t.AsE(" ",i.grace_period," / ",i.grace_interval," "),t.xp6(3),t.Tol(1==i.status?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==i.status?"success":"dark"),t.xp6(1),t.hij(" ",e.util.translate(1==i.status?"Active":"Deactived")," "),t.xp6(2),t.hij(" ",e.util.translate("Edit")," "),t.xp6(2),t.hij(" ",e.util.translate("Delete")," ")}}function N(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",49),t.NdJ("pageChange",function(l){t.CHM(i);const s=t.oxw();return t.KtG(s.page=l)}),t.qZA()()}}function w(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.createSubscription())}),t._uU(1),t.qZA()}if(2&n){const i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("Save changes")," ")}}function k(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.updateSubscription())}),t._uU(1),t.qZA()}if(2&n){const i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("Save changes")," ")}}const E=function(n){return{id:"pagin1",itemsPerPage:10,currentPage:n}},j=[{path:"",component:(()=>{class n{constructor(i,e){this.util=i,this.api=e,this.name="",this.short_desc="",this.features="",this.price="",this.signup_fee="",this.grace_period="",this.grace_interval="month",this.action="create",this.id="",this.list=[],this.dummy=[],this.page=1,this.ckeConfig={height:200,language:"en",allowedContent:!0,toolbar:[{name:"paragraph",items:["NumberedList","BulletedList"]}]},this.getAll()}ngOnInit(){}getAll(){this.list=[],this.dummy=Array(5),this.api.get_private("v1/subscriptions/getAll").then(i=>{console.log(i),this.list=[],this.dummy=[],i&&i.status&&200==i.status&&(this.list=i.data)},i=>{console.log(i),this.list=[],this.dummy=[],this.util.apiErrorHandler(i)}).catch(i=>{console.log(i),this.list=[],this.dummy=[],this.util.apiErrorHandler(i)})}createNew(){this.action="create",this.myModal2.show()}createSubscription(){if(console.log("create new"),""==this.name||null==this.name||""==this.short_desc||null==this.short_desc||null==this.features||""==this.features||""==this.grace_period||null==this.grace_period)return this.util.error(this.util.translate("All Fields are required")),!1;const i={name:this.name,short_desc:this.short_desc,features:this.features,price:""!=this.price&&null!=this.price?this.price:0,signup_fee:""!=this.signup_fee&&null!=this.signup_fee?this.signup_fee:0,grace_period:this.grace_period,grace_interval:this.grace_interval};console.log(i),this.util.show(),this.api.post_private("v1/subscriptions/create",i).then(e=>{this.util.hide(),console.log(e),e&&e.status&&200==e.status&&(this.myModal2.hide(),this.cleanData(),this.getAll())},e=>{console.log(e),this.util.hide(),this.util.apiErrorHandler(e)}).catch(e=>{console.log(e),this.util.hide(),this.util.apiErrorHandler(e)})}updateSubscription(){if(console.log("update existing"),console.log(this.id),console.log("create new"),""==this.name||null==this.name||""==this.short_desc||null==this.short_desc||null==this.features||""==this.features||""==this.grace_period||null==this.grace_period)return this.util.error(this.util.translate("All Fields are required")),!1;const i={id:this.id,name:this.name,short_desc:this.short_desc,features:this.features,price:""!=this.price&&null!=this.price?this.price:0,signup_fee:""!=this.signup_fee&&null!=this.signup_fee?this.signup_fee:0,grace_period:this.grace_period,grace_interval:this.grace_interval};console.log(i),this.util.show(),this.api.post_private("v1/subscriptions/update",i).then(e=>{this.util.hide(),console.log(e),e&&e.status&&200==e.status&&(this.myModal2.hide(),this.cleanData(),this.getAll())},e=>{console.log(e),this.util.hide(),this.util.apiErrorHandler(e)}).catch(e=>{console.log(e),this.util.hide(),this.util.apiErrorHandler(e)})}cleanData(){this.action="create",this.id="",this.name="",this.short_desc="",this.features="",this.price="",this.signup_fee="",this.grace_interval="month",this.grace_period=""}statusUpdate(i){console.log(i),_().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To update this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(e=>{if(e&&e.value){console.log("update it");const l={id:i.id,status:0==i.status?1:0};console.log("======",l),this.util.show(),this.api.post_private("v1/subscriptions/update",l).then(s=>{this.util.hide(),console.log("+++++++++++++++",s),s&&s.status&&200==s.status&&s.success&&(this.util.success(this.util.translate("Status Updated !")),this.getAll())},s=>{this.util.hide(),console.log("Error",s),this.util.apiErrorHandler(s)}).catch(s=>{this.util.hide(),console.log("Err",s),this.util.apiErrorHandler(s)})}})}deleteItem(i){console.log(i),_().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To delete this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(e=>{if(e&&e.value){console.log("update it"),console.log(i),console.log(i);const l={id:i.id};console.log("======",l),this.util.show(),this.api.post_private("v1/subscriptions/destroy",l).then(s=>{this.util.hide(),console.log("+++++++++++++++",s),s&&s.status&&200==s.status&&s.success&&(this.util.success(this.util.translate("Status Updated !")),this.getAll())},s=>{this.util.hide(),console.log("Error",s),this.util.apiErrorHandler(s)}).catch(s=>{this.util.hide(),console.log("Err",s),this.util.apiErrorHandler(s)})}})}updateInfo(i){console.log(i),i&&i.id&&(this.action="update",this.id=i.id,this.name=i.name,this.short_desc=i.short_desc,this.features=i.features,this.price=i.price,this.signup_fee=i.signup_fee,this.grace_period=i.grace_period,this.grace_interval=i.grace_interval,this.myModal2.show())}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(T.f),t.Y36(C.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-subscriptions"]],viewQuery:function(i,e){if(1&i&&t.Gf(x,5),2&i){let l;t.iGM(l=t.CRH())&&(e.myModal2=l.first)}},decls:107,vars:33,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-primary",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],["class","error_div",4,"ngIf"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal2","bs-modal"],["role","document",1,"modal-dialog","modal-primary","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","validationServer01",1,"form-label"],[1,"text-red"],[1,"input-group","input-group-alternative"],["type","text","id","input-last-name",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["type","text","id","input-last-name","rows","3",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],[1,"col-md-12"],["debounce","500",3,"ngModel","config","ngModelChange"],[1,"col-lg-6"],["type","number","id","input-last-name",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["for","text-input",1,"text-heler"],["id","select2","name","select2",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["value","day"],["value","month"],["value","year"],[1,"modal-footer"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"error_div"],["count","1","appearance","line"],["scope","row"],[1,"d-flex","align-items-center"],[3,"color","click"],["color","info",1,"me-1","badge","bg-info",3,"click"],["color","danger",1,"me-1","badge","bg-danger",3,"click"],["id","pagin1",3,"pageChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,e){if(1&i){const l=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return e.createNew()}),t._uU(9),t.qZA(),t._uU(10," \xa0 "),t.qZA()(),t.TgZ(11,"div",8),t.YNc(12,A,3,1,"div",9),t.TgZ(13,"table",10)(14,"thead",11)(15,"tr")(16,"th",12),t._uU(17),t.qZA(),t.TgZ(18,"th",12),t._uU(19),t.qZA(),t.TgZ(20,"th",12),t._uU(21),t.qZA(),t.TgZ(22,"th",12),t._uU(23),t.qZA(),t.TgZ(24,"th",12),t._uU(25),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,y,2,2,"tr",13),t.YNc(28,q,18,12,"tr",13),t.ALo(29,"paginate"),t.qZA()(),t.YNc(30,N,2,0,"div",14),t.qZA()()()()(),t.TgZ(31,"div",15,16)(33,"div",17)(34,"div",18)(35,"div",19)(36,"h5",20),t._uU(37),t.qZA(),t.TgZ(38,"button",21),t.NdJ("click",function(){t.CHM(l);const o=t.MAs(32);return t.KtG(o.hide())}),t.TgZ(39,"span",22),t._uU(40,"\xd7"),t.qZA()()(),t.TgZ(41,"div",23)(42,"div",2)(43,"div",3)(44,"div",24)(45,"label",25),t._uU(46,"Subscriptions Name "),t.TgZ(47,"span",26),t._uU(48,"*"),t.qZA()(),t.TgZ(49,"div",27)(50,"input",28),t.NdJ("ngModelChange",function(o){return e.name=o}),t.qZA()()()(),t.TgZ(51,"div",3)(52,"div",24)(53,"label",25),t._uU(54,"Subscriptions Short Description "),t.TgZ(55,"span",26),t._uU(56,"*"),t.qZA()(),t.TgZ(57,"div",27)(58,"textarea",29),t.NdJ("ngModelChange",function(o){return e.short_desc=o}),t.qZA()()()(),t.TgZ(59,"div",30)(60,"label",25),t._uU(61,"Subscriptions Features "),t.TgZ(62,"span",26),t._uU(63,"*"),t.qZA()(),t.TgZ(64,"ckeditor",31),t.NdJ("ngModelChange",function(o){return e.features=o}),t.qZA()(),t.TgZ(65,"div",32)(66,"div",24)(67,"label",25),t._uU(68,"Subscriptions Price "),t.qZA(),t.TgZ(69,"div",27)(70,"input",33),t.NdJ("ngModelChange",function(o){return e.price=o}),t.qZA()(),t.TgZ(71,"label",34),t._uU(72),t.qZA()()(),t.TgZ(73,"div",32)(74,"div",24)(75,"label",25),t._uU(76,"Subscriptions Sign Up Tax "),t.qZA(),t.TgZ(77,"div",27)(78,"input",33),t.NdJ("ngModelChange",function(o){return e.signup_fee=o}),t.qZA()(),t.TgZ(79,"label",34),t._uU(80),t.qZA()()(),t.TgZ(81,"div",32)(82,"div",24)(83,"label",25),t._uU(84,"Subscriptions Grace Period"),t.TgZ(85,"span",26),t._uU(86,"*"),t.qZA()(),t.TgZ(87,"div",27)(88,"input",33),t.NdJ("ngModelChange",function(o){return e.grace_period=o}),t.qZA()()()(),t.TgZ(89,"div",32)(90,"div",24)(91,"label",25),t._uU(92,"Subscriptions Grace Interval"),t.TgZ(93,"span",26),t._uU(94,"*"),t.qZA()(),t.TgZ(95,"select",35),t.NdJ("ngModelChange",function(o){return e.grace_interval=o}),t.TgZ(96,"option",36),t._uU(97),t.qZA(),t.TgZ(98,"option",37),t._uU(99),t.qZA(),t.TgZ(100,"option",38),t._uU(101),t.qZA()()()()()(),t.TgZ(102,"div",39),t.YNc(103,w,2,1,"button",40),t.YNc(104,k,2,1,"button",40),t.TgZ(105,"button",41),t.NdJ("click",function(){t.CHM(l);const o=t.MAs(32);return t.KtG(o.hide())}),t._uU(106),t.qZA()()()()()}2&i&&(t.xp6(6),t.hij(" ",e.util.translate("Subscriptions")," "),t.xp6(3),t.hij(" ",e.util.translate("Add New")," "),t.xp6(3),t.Q6J("ngIf",(null==e.list?null:e.list.length)<=0&&(null==e.dummy?null:e.dummy.length)<=0),t.xp6(5),t.hij("",e.util.translate("Id")," "),t.xp6(2),t.hij("",e.util.translate("Name")," "),t.xp6(2),t.hij("",e.util.translate("Price")," "),t.xp6(2),t.hij("",e.util.translate("Grace Period")," "),t.xp6(2),t.hij("",e.util.translate("Action")," "),t.xp6(2),t.Q6J("ngForOf",e.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(29,28,e.list,t.VKq(31,E,e.page))),t.xp6(2),t.Q6J("ngIf",(null==e.list?null:e.list.length)>0),t.xp6(7),t.hij("",e.util.translate("Manage Subscriptions")," "),t.xp6(13),t.Q6J("ngModel",e.name),t.xp6(8),t.Q6J("ngModel",e.short_desc),t.xp6(6),t.Q6J("ngModel",e.features)("config",e.ckeConfig),t.xp6(6),t.Q6J("ngModel",e.price),t.xp6(2),t.hij(" ",e.util.translate("Leave Empty For Trial Subscription")," "),t.xp6(6),t.Q6J("ngModel",e.signup_fee),t.xp6(2),t.hij(" ",e.util.translate("Leave Empty For Trial Subscription")," "),t.xp6(8),t.Q6J("ngModel",e.grace_period),t.xp6(7),t.Q6J("ngModel",e.grace_interval),t.xp6(2),t.hij(" ",e.util.translate("Day")," "),t.xp6(2),t.hij(" ",e.util.translate("Month")," "),t.xp6(2),t.hij(" ",e.util.translate("Year")," "),t.xp6(2),t.Q6J("ngIf","create"==e.action),t.xp6(1),t.Q6J("ngIf","update"==e.action),t.xp6(2),t.hij(" ",e.util.translate("Close")," "))},dependencies:[p.sg,p.O5,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.On,m.Ro,d.LS,f.xr,b.oB,v.w5,d._s]}),n})()}];let F=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(j),g.Bz]}),n})();var c=a(4980);let Q=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,F,u.u5,m.ef,d.JX,f.hx.forRoot({animation:"progress-dark"}),b.zk,c.ejP,c.hJ1,c.ga2,c.kWm,c.m81,c.Xo8,c.dTQ,c.zE6,v.dF]}),n})()}}]);